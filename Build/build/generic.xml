<?xml version="1.0"?>

<project name="generic" default="all" basedir="../..">

    <target name="usage" depends="global.properties">
	<echo>

There are three ways to use this script:

1) from the command line to build the whole of WONDER
		all    	--> create in ${build.root}
		install --> copy to ${wo.localroot}
		web     --> copy to ${wo.server.root}
		clean   --> remove .classes, .framework or .woa

2) to have clickable targets in PBX for specific parts of WONDER, for example
        ant -emacs -f ~/Wonder/Build/build/generic.xml \
            -Dproject.name=ERExtensions \
            -Dproject.type=framework \
            generic.$ACTION

3) to build your own projects that have the same layout as a wonder project
        ant -emacs -f ~/Wonder/Build/build/generic.xml  \
		-Dproject.type=application \
		-Dproject.name=SomeProject \
		-Dproject.principal.class=com.company.Application \
		-Dproject.dir=/path/to/my/SomeProject \
		-Duse.webobjects.d2w=true \
		-Duse.wonder.core=true \
		-Duse.wonder.d2w=true \
		-Duse.wonder.logic=true \
		-Duse.wonder.mail=true \
		-Duse.wonder.changenotification=true \
		-Duse.validity=true \
		-Duse.woogln=true \
		-Duse.mysql=true \
		-Duse.additional.framework.1=SomeProjectLogic.framework \
		-Duse.additional.framework.2=SomePattern1\* \
		-Duse.additional.framework.3=SomePattern2\* \
		-Duse.additional.framework.4=SomePattern3\* \
		generic.MODE

	Leave out any option you don't want. Valid entries MODEs are:
		all    	--> create in ${build.root}
		install --> copy to ${wo.localroot}
		web     --> copy to ${wo.server.root}
		clean   --> remove .classes, .framework or .woa

	For MODE "install", "clean" and "web" it is sufficient to call:
        ant -emacs -f ~/Wonder/Build/build/generic.xml  \
		-Dproject.type=application \
		-Dproject.name=SomeProject \
		generic.MODE
	</echo>
    </target>

    <!-- When you add another sub-project, use this as a template
         We strongly encourage you to use one of the provided 
         templates or mimic the structure
             SomeProject/
                Sources/
                Resources/
                WebServerResources/
                Components/
         when you create a new project.
         Additionally, you might want to add your subproject in the dependency hierachy
         and add it to the "all.web" "all.clean" and "all.install" tasks 
     -->

    <target name="SomeNewProject.all">
         <!-- project.type, either "global.application" or "global.framework" -->
         <antcall target="global.application" >

            <!-- princical class if the framework or Application class -->
            <param name="project.principal.class" value="com.company.Application" />

            <!-- Name of the framework or application -->
            <param name="project.name" value="SomeNewProject" />

            <!-- Path where the project resides, can be absolute -->
            <param name="project.dir" value="/path/to/your/project" />

            <!-- set this if you want to use plain D2W, or leave out if not -->
            <param name="use.webobjects.d2w" value="true" />

            <!-- set this if you want to use Wonders ERJars and ERExtensions, or leave out if not -->
            <param name="use.wonder.core" value="true" />

            <!-- set this if you want to use Wonders D2W, or leave out if not -->
            <param name="use.wonder.d2w" value="true" />

            <!-- set this if you want to use Wonder's ERCoreBusinessLogic, or leave out if not -->
            <param name="use.wonder.logic" value="true" />

            <!-- set this if you want to use Wonder's ERJavaMail, or leave out if not -->
            <param name="use.wonder.mail" value="true" />

            <!-- set this if you want to use Wonder's ERChangeNotificationJMS, or leave out if not -->
            <param name="use.wonder.changenotification" value="true" />

            <!-- set this if you want to use your own built frameworks, or leave out if not -->
            <!-- You have up to 4 of them and you can use patterns -->
            <param name="use.additional.framework.1" value="BTBusinessLogic.framework" />
            <param name="use.additional.framework.2" value="SomeOther*" />
            <param name="use.additional.framework.3" value="BT*" />
            <param name="use.additional.framework.4" value="BTBusinessLogic" />

            <!-- set this if you want to use Validity, or leave out if not -->
            <param name="use.validity" value="true" />

            <!-- set this if you want to use WOOgnl, or leave out if not -->
            <param name="use.woogln" value="true" />

            <!-- set this if you want to use Validity, or leave out if not -->
            <param name="use.mysql" value="true" />
        </antcall>
    </target>
    <!-- /When you add another sub-project, use this as a template -->

    <!-- Generic task. Use this from a custom build style in Project Builder according to the example in the "usage" task -->
    <target name="generic">
        <antcall target="generic.all" />
    </target>
    <target name="generic."><!-- the "." is intentional to facilitate running from PBX buttons -->
        <antcall target="${project.name}.all" >
        </antcall>
    </target>
    <target name="generic.all">
        <antcall target="global.${project.type}" >
            <param name="project.principal.class" value="${project.principal.class}" />
            <param name="project.name" value="${project.name}" />
            <param name="project.dir" value="${project.dir}" />
        </antcall>
    </target>
    <target name="generic.clean">
        <antcall target="global.clean.${project.type}" >
            <param name="project.name" value="${project.name}" />
        </antcall>
    </target>
    <target name="generic.install">
        <antcall target="global.install.${project.type}" >
            <param name="project.name" value="${project.name}" />
        </antcall>
    </target>
    <target name="generic.web">
        <antcall target="global.web.${project.type}" >
            <param name="project.name" value="${project.name}" />
        </antcall>
    </target>


    <target name="global.environment">
        <property file="Build/build/build.properties" />
        <property file="${user.home}/build.properties" />
        <property file="Build/build/default.properties" />
        <property file="Build/build/${os.name}.properties" />
        <property file="Build/build/default-os.properties" />

        <property name="wo.woroot" value="/System" />
        <property name="wo.localroot" value="/Local" />
        <property name="build.root" value="${user.home}/Roots" />
        <property name="build.classes" value="${build.root}/classes/${project.name}" />
    </target>

    <target name="global.properties" depends="global.environment">
        <property name="framework.name" value="${project.name}.framework" />
        <property name="build.framework.dir" value="${build.root}/${framework.name}" />
    </target>

    <target name="global.prepare" depends="global.properties">
        <mkdir dir="${project.dir}/Libraries" />
        <mkdir dir="${project.dir}/Sources" />
        <mkdir dir="${project.dir}/Resources" />
        <mkdir dir="${project.dir}/Components" />
        <mkdir dir="${project.dir}/WebServerResources" />
        <mkdir dir="${build.root}" />
        <mkdir dir="${build.classes}" />
    </target>

    <target name="global.compile" depends="global.prepare">
        <taskdef name="wocompile" classname="org.objectstyle.woproject.ant.WOCompile" />
        <wocompile srcdir="${project.dir}/Sources" destdir="${build.classes}" debug="on" optimize="off" deprecation="on">
            <classpath> 
                <fileset dir="${project.dir}/Libraries">
                    <include name="**/*.jar" />
                </fileset>
            </classpath>
            <!-- this should be an exact copy of the frameworks in the woapplication task --> 
            <frameworks root="${build.root}" if="use.wonder.core"> 
                <include name="ERJars.framework" />
                <include name="ERExtensions.framework" />
            </frameworks>
            <frameworks root="${build.root}" if="use.wonder.d2w"> 
                <include name="ERJars.framework" />
                <include name="ERExtensions.framework" />
                <include name="ERDirectToWeb.framework" />
            </frameworks>
            <frameworks root="${build.root}" if="use.wonder.logic"> 
                <include name="ERCoreBusinessLogic.framework" />
            </frameworks>
            <frameworks root="${build.root}" if="use.wonder.mail"> 
                <include name="ERJavaMail.framework" />
            </frameworks>
            <frameworks root="${build.root}" if="use.wonder.changenotification"> 
                <include name="ERChangeNotificationJMS.framework" />
            </frameworks>
            <frameworks root="${build.root}" if="use.validity"> 
                <include name="Validity.framework" />
            </frameworks>
            <frameworks root="${build.root}" if="use.woognl"> 
                <include name="WOOngl.framework" />
            </frameworks>
           <frameworks root="${wo.localroot}/Library/Frameworks" if="use.mysql">
                <include name="Mysql*.framework"/>
           </frameworks>
           <frameworks root="${wo.localroot}/Library/Frameworks" if="use.mysql">
                <include name="Mysql*.framework"/>
           </frameworks>
           <frameworks root="${build.root}" if="use.additional.framework.1">
                <include name="${use.additional.framework.1}"/>
           </frameworks>
           <frameworks root="${build.root}" if="use.additional.framework.2">
                <include name="${use.additional.framework.2}"/>
           </frameworks>
           <frameworks root="${build.root}" if="use.additional.framework.3">
                <include name="${use.additional.framework.3}"/>
           </frameworks>
           <frameworks root="${build.root}" if="use.additional.framework.4">
                <include name="${use.additional.framework.4}"/>
           </frameworks>
            <frameworks root="${wo.woroot}/Library/Frameworks"> 
                <include name="JavaFoundation.framework" />
                <include name="JavaEOAccess.framework" />
                <include name="JavaEOControl.framework" />
                <include name="JavaWebObjects.framework" />
                <include name="JavaWOJSPServlet.framework" />
                <include name="JavaPlot.framework" />
                <include name="JavaJDBCAdaptor.framework" />
                <include name="JavaXML.framework" />
            </frameworks>
            <frameworks root="${build.root}"> 
                <include name="JavaWOExtensions.framework" />
            </frameworks>
            <frameworks root="${wo.woroot}/Library/Frameworks" if="use.webobjects.d2w"> 
                <include name="JavaDirectToWeb.framework" />
                <include name="JavaEOGeneration.framework" />
                <include name="JavaEOProject.framework" />
                <include name="JavaDTWGeneration.framework" />
            </frameworks>
        </wocompile>
    </target>

    <target name="global.framework" depends="global.properties,global.compile">

        <mkdir dir="${build.framework.dir}" />
        <taskdef name="woframework" classname="org.objectstyle.woproject.ant.WOFramework" />
        <woframework name="${project.name}" destDir="${build.root}" principalClass="${project.principal.class}" jarName="${project.name}">
            <lib dir="${project.dir}/Libraries">
                <include name="**/*.jar" />
            </lib>
            <classes dir="${build.classes}">
                <include name="**/*.class" />
            </classes>
            <resources dir="${project.dir}/Components">
                <include name="**.api" />
                <include name="**/*.wo/**" />
            </resources>
            <resources dir="${project.dir}/Resources">
                <include name="*.eomodeld/**" />
                <include name="**/*.plist" />
                <include name="**/*.d2wmodel" />
                <include name="**/Properties" />
                <include name="**/*.strings" />
                <include name="**/*.sh" />
                <include name="**/mime.types" /> 
            </resources>
            <wsresources dir="${project.dir}/WebServerResources">
                <include name="**/*.gif" />
                <include name="**/*.jpeg" />
                <include name="**/*.js" />
                <include name="**/*.css" />
            </wsresources>
        </woframework>
        <exec dir="${project.dir}" executable="/bin/sh" os="Mac OS X">
            <arg line="${build.root}/ERJars.framework/Resources/CPCreateFileList.sh" />
        </exec>
 
        <echo message="-------------------------------------" />
        <echo message="${project.name}.framework done" />
        <echo message="-------------------------------------" />
    </target>

    <target name="global.application" depends="global.properties,global.compile" >

        <taskdef name="woapplication" classname="org.objectstyle.woproject.ant.WOApplication" />
        <woapplication name="${project.name}" destDir="${build.root}" principalClass="${project.principal.class}" jarName="${project.name}" stdFrameworks="false">
            <classes dir="${build.classes}">
                <include name="**/*.class" />
            </classes>
            <resources dir="${project.dir}/Components">
                <include name="**.api" />
                <include name="**/*.wo/**" />
            </resources>
            <resources dir="${project.dir}/Resources">
                <include name="*.eomodeld/**" />
                <include name="**/*.plist" />
                <include name="**/*.d2wmodel" />
                <include name="**/Properties" />
                <include name="**/*.strings" />
                <include name="**/*.sh" />
            </resources>
            <wsresources dir="${project.dir}/WebServerResources">
                <include name="**/*.gif" />
                <include name="**/*.jpeg" />
                <include name="**/*.js" />
                <include name="**/*.css" />
            </wsresources>
            <!-- this should be an exact copy of the frameworks in the woapplication task --> 
            <frameworks root="${build.root}" if="use.wonder.core"> 
                <include name="ERJars.framework" />
                <include name="ERExtensions.framework" />
            </frameworks>
            <frameworks root="${build.root}" if="use.wonder.d2w"> 
                <include name="ERJars.framework" />
                <include name="ERExtensions.framework" />
                <include name="ERDirectToWeb.framework" />
            </frameworks>
            <frameworks root="${build.root}" if="use.wonder.logic"> 
                <include name="ERCoreBusinessLogic.framework" />
            </frameworks>
            <frameworks root="${build.root}" if="use.wonder.mail"> 
                <include name="ERJavaMail.framework" />
            </frameworks>
            <frameworks root="${build.root}" if="use.wonder.changenotification"> 
                <include name="ERChangeNotificationJMS.framework" />
            </frameworks>
            <frameworks root="${build.root}" if="use.validity"> 
                <include name="Validity.framework" />
            </frameworks>
            <frameworks root="${build.root}" if="use.woognl"> 
                <include name="WOOngl.framework" />
            </frameworks>
           <frameworks root="${wo.localroot}/Library/Frameworks" if="use.mysql">
                <include name="Mysql*.framework"/>
           </frameworks>
           <frameworks root="${wo.localroot}/Library/Frameworks" if="use.mysql">
                <include name="Mysql*.framework"/>
           </frameworks>
           <frameworks root="${build.root}" if="use.additional.framework.1">
                <include name="${use.additional.framework.1}"/>
           </frameworks>
           <frameworks root="${build.root}" if="use.additional.framework.2">
                <include name="${use.additional.framework.2}"/>
           </frameworks>
           <frameworks root="${build.root}" if="use.additional.framework.3">
                <include name="${use.additional.framework.3}"/>
           </frameworks>
           <frameworks root="${build.root}" if="use.additional.framework.4">
                <include name="${use.additional.framework.4}"/>
           </frameworks>
            <frameworks root="${wo.woroot}/Library/Frameworks"> 
                <include name="JavaFoundation.framework" />
                <include name="JavaEOAccess.framework" />
                <include name="JavaEOControl.framework" />
                <include name="JavaWebObjects.framework" />
                <include name="JavaWOJSPServlet.framework" />
                <include name="JavaPlot.framework" />
                <include name="JavaJDBCAdaptor.framework" />
                <include name="JavaXML.framework" />
            </frameworks>
            <frameworks root="${build.root}"> 
                <include name="JavaWOExtensions.framework" />
            </frameworks>
            <frameworks root="${wo.woroot}/Library/Frameworks" if="use.webobjects.d2w"> 
                <include name="JavaDirectToWeb.framework" />
                <include name="JavaEOGeneration.framework" />
                <include name="JavaEOProject.framework" />
                <include name="JavaDTWGeneration.framework" />
            </frameworks>
        </woapplication>
        <exec dir="${project.dir}" executable="/bin/sh" os="Mac OS X">
            <arg line="${build.root}/ERJars.framework/Resources/CPCreateFileList.sh" />
        </exec>

        <echo message="-------------------------------------" />
        <echo message="${project.name}.woa" />
        <echo message="-------------------------------------" />
    </target>

    <target name="global.install.framework" depends="global.properties">
        <copy todir="${wo.localroot}/Library/Frameworks/${project.name}.framework">
            <fileset dir="${build.root}/${project.name}.framework" />
        </copy>
    </target>

    <target name="global.install.application" depends="global.properties">
         <mkdir dir="${wo.localroot}/Library/WebObjects/JavaApplications" />
         <copy todir="${wo.localroot}/Library/WebObjects/JavaApplications/${project.name}.woa">
            <fileset dir="${build.root}/${project.name}.woa" />
        </copy>
        <exec dir="${wo.localroot}/Library/WebObjects/JavaApplications/${project.name}.woa" executable="/bin/chmod" os="Mac OS X">
            <arg line="a+x ${project.name}" />
        </exec>
    </target>

    <target name="global.web.framework" depends="global.properties">
        <mkdir dir="${wo.server.root}/Frameworks/${project.name}.framework" />
        <copy todir="${wo.server.root}/Frameworks/${project.name}.framework/WebServerResources">
            <fileset dir="${build.root}/${project.name}.framework/WebServerResources" />
        </copy>
    </target>
	
    <target name="global.web.application" depends="global.properties">
        <mkdir dir="${wo.server.root}/${project.name}.woa" />
        <mkdir dir="${wo.server.root}/${project.name}.woa/Contents" />
        <copy todir="${wo.server.root}/${project.name}.woa/Contents/WebServerResources">
            <fileset dir="${build.root}/${project.name}.woa/Contents/WebServerResources" />
        </copy>
    </target>
	
    <target name="global.clean.framework" depends="global.properties">
        <echo message="-------------------------------------" />
        <echo message="Cleaning ${project.name}" />
        <echo message="-------------------------------------" />
        <delete dir="${build.classes}" />
        <delete dir="${build.root}/${project.name}.framework" />
    </target>
	
    <target name="global.clean.application" depends="global.properties">
        <echo message="-------------------------------------" />
        <echo message="Cleaning ${project.name}" />
        <echo message="${build.root}/${project.name}.woa" />
        <echo message="-------------------------------------" />
        <delete dir="${build.classes}" />
        <delete dir="${build.root}/${project.name}.woa" />
    </target>
    
    <!-- (ak) ERJars is handled separately because it needs to copy the compiler proxy files first -->
    <target name="ERJars.all">
        <property name="build.root" value="${user.home}/Roots" />
        <property name="project.dir" value="Common/Frameworks/ERJars" />
        <taskdef name="woframework" classname="org.objectstyle.woproject.ant.WOFramework" />
        <woframework name="ERJars" destDir="${build.root}" principalClass="" jarName="ERJars">
            <lib dir="${project.dir}/Libraries">
                <include name="**/*.jar" />
            </lib>
            <resources dir="${project.dir}/Resources">
                <include name="**/*.sh" />
            </resources>
        </woframework>
    </target>
   
    <target name="JavaWOExtensions.all">
        <antcall target="global.framework" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="JavaWOExtensions" />
            <param name="project.dir" value="Common/Frameworks/JavaWOExtensions" />
        </antcall>
    </target>

    <target name="ERExtensions.all">
        <antcall target="global.framework" >
            <param name="project.principal.class" value="er.extensions.ERXExtensions" />
            <param name="project.name" value="ERExtensions" />
            <param name="project.dir" value="Common/Frameworks/ERExtensions" />
            <param name="use.wonder.core" value="true" />
        </antcall>
    </target>
    
    <target name="ERDirectToWeb.all">
        <antcall target="global.framework" >
            <param name="project.principal.class" value="er.directtoweb.ERDirectToWeb" />
            <param name="project.name" value="ERDirectToWeb" />
            <param name="project.dir" value="Common/Frameworks/ERDirectToWeb" />

            <param name="use.webobjects.d2w" value="true" />
            <param name="use.wonder.d2w" value="true" />
            <param name="use.wonder.logic" value="true" />
        </antcall>
    </target>
    
    <target name="ERCoreBusinessLogic.all">
        <antcall target="global.framework" >
            <param name="project.principal.class" value="er.corebusinesslogic.ERCoreBusinessLogic" />
            <param name="project.name" value="ERCoreBusinessLogic" />
            <param name="project.dir" value="Common/Frameworks/ERCoreBusinessLogic" />

            <param name="use.webobjects.d2w" value="true" />
            <param name="use.wonder.d2w" value="true" />
        </antcall>
    </target>
    
    <target name="ERJavaMail.all">
        <antcall target="global.framework" >
            <param name="project.principal.class" value="er.javamail.ERJavaMail" />
            <param name="project.name" value="ERJavaMail" />
            <param name="project.dir" value="Common/Frameworks/ERJavaMail" />
            <param name="use.wonder.core" value="true" />
       </antcall>
    </target>
    
    <target name="ERChangeNotificationJMS.all">
        <antcall target="global.framework" >
            <param name="project.principal.class" value="er.changenotification.ERCNNotificationCoordinator" />
            <param name="project.name" value="ERChangeNotificationJMS" />
            <param name="project.dir" value="Common/Frameworks/ERChangeNotificationJMS" />
            <param name="use.wonder.core" value="true" />
        </antcall>
    </target>

    <target name="ERNeutralLook.all">
        <antcall target="global.framework" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERNeutralLook" />
            <param name="project.dir" value="Common/Frameworks/ERNeutralLook" />

            <param name="use.webobjects.d2w" value="true" />
            <param name="use.wonder.d2w" value="true" />
            <param name="use.wonder.logic" value="true" />
        </antcall>
    </target>
    
    <target name="WOOgnl.all">
        <antcall target="global.framework" >
            <param name="project.principal.class" value="ognl.webobjects.WOOgnl" />
            <param name="project.name" value="WOOgnl" />
            <param name="project.dir" value="Common/Frameworks/WOOgnl" />

            <param name="use.webobjects.d2w" value="true" />
        </antcall>
    </target>

    <target name="BTBusinessLogic.all">
        <antcall target="global.framework" >
            <param name="project.principal.class" value="er.bugtracker.BTBusinessLogic" />
            <param name="project.name" value="BTBusinessLogic" />
            <param name="project.dir" value="Common/Applications/BugTracker/Frameworks/BTBusinessLogic" />

            <param name="use.webobjects.d2w" value="true" />
            <param name="use.wonder.d2w" value="true" />
            <param name="use.wonder.logic" value="true" />
        </antcall>
    </target>

    <target name="BugTracker.all">
        <antcall target="global.application" >
            <param name="project.principal.class" value="er.bugtracker.Application" />
            <param name="project.name" value="BugTracker" />
            <param name="project.dir" value="Common/Applications/BugTracker" />

            <param name="use.webobjects.d2w" value="true" />
            <param name="use.wonder.d2w" value="true" />
            <param name="use.wonder.logic" value="true" />
            <param name="use.mysql" value="true" />
            <param name="use.additional.framework.1" value="BTBusinessLogic.framework" />
        </antcall>
    </target>

    <target name="D2WInspectExample.all">
        <antcall target="global.application" >
            <param name="project.principal.class" value="Application" />
            <param name="project.name" value="D2WInspectExample" />
            <param name="project.dir" value="Common/Examples/Stepwise/D2WInspectExample" />
 
            <param name="use.webobjects.d2w" value="true" />
       </antcall>
    </target>

    <target name="ERMailer.all">
        <antcall target="global.application" >
            <param name="project.principal.class" value="Application" />
            <param name="project.name" value="ERMailer" />
            <param name="project.dir" value="Common/Applications/ERMailer" />
 
            <param name="use.wonder.d2w" value="true" />
            <param name="use.wonder.logic" value="true" />
            <param name="use.wonder.mail" value="true" />
       </antcall>
    </target>

    <target name="D2WListExample.all">
        <antcall target="global.application" >
            <param name="project.principal.class" value="Application" />
            <param name="project.name" value="D2WListExample" />
            <param name="project.dir" value="Common/Examples/Stepwise/D2WListExample" />

            <param name="use.webobjects.d2w" value="true" />
         </antcall>
    </target>

    <target name="NetStruxrCaseStudy.all">
        <antcall target="global.application" >
            <param name="project.principal.class" value="Application" />
            <param name="project.name" value="NetStruxrCaseStudy" />
            <param name="project.dir" value="Common/Examples/Wrox/NetStruxrCaseStudy" />

            <param name="use.webobjects.d2w" value="true" />
            <param name="use.wonder.d2w" value="true" />
            <param name="use.wonder.logic" value="true" />
        </antcall>
    </target>
    
    <target name="ERMiniUglyLook.all">
        <antcall target="global.framework" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ERMiniUglyLook" />
            <param name="project.dir" value="Common/Examples/Wrox/ERMiniUglyLook" />

            <param name="use.webobjects.d2w" value="true" />
            <param name="use.wonder.d2w" value="true" />
        </antcall>
    </target>
    
    <target name="WOPayPal.all">
        <antcall target="global.framework" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="WOPayPal" />
            <param name="project.dir" value="PayPal/Frameworks/WOPayPal" />
        </antcall>
    </target>

    <target name="Validity.framework.all">
        <antcall target="global.framework" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="Validity" />
            <param name="project.dir" value="Validity/Frameworks/Validity" />
        </antcall>
    </target>

    <target name="Validity.application.all">
        <antcall target="global.application" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ValidityModeler" />
            <param name="project.dir" value="Validity/Applications/ValidityModeler" />

            <param name="use.validity" value="true" />
        </antcall>
    </target>

    <target name="Validity.example.all">
        <antcall target="global.application" >
            <param name="project.principal.class" value="" />
            <param name="project.name" value="ValidityExample" />
            <param name="project.dir" value="Validity/Examples/ValidityExample" />

            <param name="use.validity" value="true" />
        </antcall>
    </target>
	
    <target name="DevStudio.all">
        <antcall target="global.application" >
            <param name="project.principal.class" value="ag.kcmedia.Application" />
            <param name="project.name" value="DevStudio" />
            <param name="project.dir" value="Experimental/DevStudio" />

            <param name="use.webobjects.d2w" value="true" />
            <param name="use.wonder.d2w" value="true" />
         </antcall>
    </target>

    <target name="core.all" depends="ERJars.all, JavaWOExtensions.all, ERExtensions.all, ERDirectToWeb.all" />
    <target name="frameworks.all" depends="core.all, ERNeutralLook.all, WOOgnl.all, ERCoreBusinessLogic.all, ERJavaMail.all, ERChangeNotificationJMS.all" />
    <target name="bugtracker.all" depends="frameworks.all, BTBusinessLogic.all, BugTracker.all" />
    <target name="applications.all" depends="frameworks.all, bugtracker.all, ERMailer.all" />
    <target name="wrox.all" depends="frameworks.all,ERMiniUglyLook.all, NetStruxrCaseStudy.all" />
    <target name="stepwise.all" depends="D2WListExample.all ,D2WInspectExample.all" />
    <target name="examples.all" depends="frameworks.all, wrox.all, stepwise.all" />
    <target name="common.all" depends="frameworks.all, applications.all, examples.all" />

    <target name="Validity.base" depends="Validity.framework.all, Validity.application.all" />
    <target name="Validity.all" depends="Validity.base, Validity.example.all" />
    <target name="subprojects.all" depends="WOPayPal.all, Validity.all" />

    <target name="experimental.all" depends="DevStudio.all" />

    <target name="all.compile" depends="common.all, subprojects.all, experimental.all" />

    <target name="all.clean">
        <antcall target="global.clean.framework" >
            <param name="project.name" value="ERJars" />
        </antcall>
        <antcall target="global.clean.framework" >
            <param name="project.name" value="ERExtensions" />
        </antcall>
        <antcall target="global.clean.framework" >
            <param name="project.name" value="ERDirectToWeb" />
        </antcall>
        <antcall target="global.clean.framework" >
            <param name="project.name" value="ERCoreBusinessLogic" />
        </antcall>
        <antcall target="global.clean.framework" >
            <param name="project.name" value="ERJavaMail" />
        </antcall>
        <antcall target="global.clean.framework" >
            <param name="project.name" value="ERChangeNotificationJMS" />
        </antcall>
        <antcall target="global.clean.framework" >
            <param name="project.name" value="ERNeutralLook" />
        </antcall>
        <antcall target="global.clean.framework" >
            <param name="project.name" value="JavaWOExtensions" />
        </antcall>
        <antcall target="global.clean.framework" >
            <param name="project.name" value="Validity" />
        </antcall>
        <antcall target="global.clean.framework" >
            <param name="project.name" value="WOOgnl" />
        </antcall>
        <antcall target="global.clean.framework" >
            <param name="project.name" value="WOPayPal" />
        </antcall>
        <antcall target="global.clean.framework" >
            <param name="project.name" value="ERMiniUglyLook" />
        </antcall>
        <antcall target="global.clean.framework" >
            <param name="project.name" value="BTBusinessLogic" />
        </antcall>

        <antcall target="global.clean.application" >
            <param name="project.name" value="BugTracker" />
        </antcall>
        <antcall target="global.clean.application" >
            <param name="project.name" value="D2WInspectExample" />
        </antcall>
        <antcall target="global.clean.application" >
            <param name="project.name" value="D2WListExample" />
        </antcall>
        <antcall target="global.clean.application" >
            <param name="project.name" value="ValidityModeler" />
        </antcall>
        <antcall target="global.clean.application" >
            <param name="project.name" value="ValidityExample" />
        </antcall>
        <antcall target="global.clean.application" >
            <param name="project.name" value="DevStudio" />
        </antcall>
        <antcall target="global.clean.application" >
            <param name="project.name" value="ERMailer" />
        </antcall>
        <antcall target="global.clean.application" >
            <param name="project.name" value="NetStruxrCaseStudy" />
        </antcall>
        <antcall target="global.clean.application" >
            <param name="project.name" value="DevStudio" />
        </antcall>
     </target>

    <target name="all.web">
        <!--ERJars does not have WebServerResources -->
        <!--antcall target="global.web.framework" >
            <param name="project.name" value="ERJars" />
        </antcall-->

        <antcall target="global.web.framework" >
            <param name="project.name" value="ERExtensions" />
        </antcall>
        <antcall target="global.web.framework" >
            <param name="project.name" value="ERDirectToWeb" />
        </antcall>
        <antcall target="global.web.framework" >
            <param name="project.name" value="ERCoreBusinessLogic" />
        </antcall>
        <antcall target="global.web.framework" >
            <param name="project.name" value="ERJavaMail" />
        </antcall>
        <antcall target="global.web.framework" >
            <param name="project.name" value="ERChangeNotificationJMS" />
        </antcall>
        <antcall target="global.web.framework" >
            <param name="project.name" value="ERNeutralLook" />
        </antcall>
        <antcall target="global.web.framework" >
            <param name="project.name" value="JavaWOExtensions" />
        </antcall>
        <antcall target="global.web.framework" >
            <param name="project.name" value="Validity" />
        </antcall>
        <antcall target="global.web.framework" >
            <param name="project.name" value="WOOgnl" />
        </antcall>
        <antcall target="global.web.framework" >
            <param name="project.name" value="WOPayPal" />
        </antcall>
        <antcall target="global.web.framework" >
            <param name="project.name" value="ERMiniUglyLook" />
        </antcall>
        <antcall target="global.web.framework" >
            <param name="project.name" value="BTBusinessLogic" />
        </antcall>

        <antcall target="global.web.application" >
            <param name="project.name" value="BugTracker" />
        </antcall>
        <antcall target="global.web.application" >
            <param name="project.name" value="D2WInspectExample" />
        </antcall>
        <antcall target="global.web.application" >
            <param name="project.name" value="D2WListExample" />
        </antcall>
        <antcall target="global.web.application" >
            <param name="project.name" value="ValidityModeler" />
        </antcall>
        <antcall target="global.web.application" >
            <param name="project.name" value="ValidityExample" />
        </antcall>
        <antcall target="global.web.application" >
            <param name="project.name" value="DevStudio" />
        </antcall>
        <antcall target="global.web.application" >
            <param name="project.name" value="ERMailer" />
        </antcall>
        <antcall target="global.web.application" >
            <param name="project.name" value="NetStruxrCaseStudy" />
        </antcall>
       <antcall target="global.web.application" >
            <param name="project.name" value="DevStudio" />
        </antcall>
     </target>

    <target name="all.install">
        <antcall target="global.install.framework" >
            <param name="project.name" value="ERJars" />
        </antcall>
        <antcall target="global.install.framework" >
            <param name="project.name" value="ERExtensions" />
        </antcall>
        <antcall target="global.install.framework" >
            <param name="project.name" value="ERDirectToWeb" />
        </antcall>
        <antcall target="global.install.framework" >
            <param name="project.name" value="ERCoreBusinessLogic" />
        </antcall>
        <antcall target="global.install.framework" >
            <param name="project.name" value="ERJavaMail" />
        </antcall>
        <antcall target="global.install.framework" >
            <param name="project.name" value="ERChangeNotificationJMS" />
        </antcall>
        <antcall target="global.install.framework" >
            <param name="project.name" value="ERNeutralLook" />
        </antcall>
        <antcall target="global.install.framework" >
            <param name="project.name" value="JavaWOExtensions" />
        </antcall>
        <antcall target="global.install.framework" >
            <param name="project.name" value="Validity" />
        </antcall>
        <antcall target="global.install.framework" >
            <param name="project.name" value="WOOgnl" />
        </antcall>
        <antcall target="global.install.framework" >
            <param name="project.name" value="WOPayPal" />
        </antcall>
        <antcall target="global.install.framework" >
            <param name="project.name" value="ERMiniUglyLook" />
        </antcall>
        <antcall target="global.install.framework" >
            <param name="project.name" value="BTBusinessLogic" />
        </antcall>

        <antcall target="global.install.application" >
            <param name="project.name" value="BugTracker" />
        </antcall>
        <antcall target="global.install.application" >
            <param name="project.name" value="D2WInspectExample" />
        </antcall>
        <antcall target="global.install.application" >
            <param name="project.name" value="D2WListExample" />
        </antcall>
        <antcall target="global.install.application" >
            <param name="project.name" value="ValidityModeler" />
        </antcall>
        <antcall target="global.install.application" >
            <param name="project.name" value="ValidityExample" />
        </antcall>
        <antcall target="global.install.application" >
            <param name="project.name" value="DevStudio" />
        </antcall>
        <antcall target="global.install.application" >
            <param name="project.name" value="ERMailer" />
        </antcall>
        <antcall target="global.install.application" >
            <param name="project.name" value="NetStruxrCaseStudy" />
        </antcall>
        <antcall target="global.install.application" >
            <param name="project.name" value="DevStudio" />
        </antcall>
     </target>

    <target name="all" depends="all.compile" />
    <target name="install" depends="all.compile, all.install" />
    <target name="web" depends="all.compile, all.web" />
    <target name="clean" depends="all.clean" />

</project>
